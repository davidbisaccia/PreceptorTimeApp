<div class="backdrop"></div>
<div class="alert-box">
    
    <h2 class="title">Reset Password: {{user.displayName}}</h2>
    <br>

    <div *ngIf="isUpdating" style="text-align: center">
        <app-loading-spinner></app-loading-spinner>
    </div>
    
    <span class="close-btn glyphicon glyphicon-remove" (click)="onClose()"></span>

    <span *ngIf="errorMsg !== null && !isUpdating" class="help-block">An error occurred, please refresh and try again: {{errorMsg}}</span>

    <form *ngIf="errorMsg === null" [formGroup]="resetUserPasswordForm"> 

        <div class="form-group">
            <label for="rotation">New Password</label>
            <input type="password" id="password" formControlName="password" class="form-control" [disabled]="isUpdating">
            <span *ngIf="!resetUserPasswordForm.get('password').valid && resetUserPasswordForm.get('password').touched" class="help-block">
                Password is required
            </span>
        </div>

        <div class="form-group">
            <label for="hours">Confirm New Password</label>
            <input type="password" id="confirmPassword" formControlName="confirmPassword" class="form-control" [disabled]="isUpdating">
            <span *ngIf="!resetUserPasswordForm.get('confirmPassword').valid && resetUserPasswordForm.get('confirmPassword').touched" class="help-block">
                Matching password required
            </span>
            <span *ngIf="resetUserPasswordForm.hasError('notSame')" class="help-block">
                Passwords do not match
            </span>
        </div>

        <br>
        <div class="alert-box-actions">
            <button class="btn btn-success" type="button" (click)="onReset()" [disabled]="!resetUserPasswordForm.valid || isUpdating">Reset</button>
            <button class="btn btn-primary" type="button" (click)="onClose()">Cancel</button>
        </div>
    </form>
</div>
